{"version":3,"sources":["components/ErrorIndicator/cross.svg","components/BookstoreServiceContext/BookstoreServiceContext.js","components/Hoc/WithBookstoreService.js","actions/index.js","utils/compose.js","components/Spinner/Spinner.js","components/ErrorIndicator/ErrorIndicator.js","components/BookListItem/BookListItem.js","components/BookList/BookList.js","containers/BookListContainer.js","components/Pages/HomePage.js","components/ShoppingCart/ShoppingCart.js","components/Pages/CartPage.js","components/Header/Header.js","components/App/App.js","components/ErrorBoundry/ErrorBoundry.js","services/bookstore-service.js","reducers/bookList.js","reducers/shoppingCart.js","reducers/index.js","store.js","index.js"],"names":["module","exports","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","fetchBooks","dispatch","type","getBooks","then","data","payload","catch","err","bookAddToCart","bookId","compose","funcs","comp","reduceRight","wrapped","f","Spinner","className","ErrorIndicator","alt","src","error","BookListItem","book","onAddToCart","title","author","price","cover","href","onClick","BookList","books","map","key","id","connect","bookList","loading","bindActionCreators","useEffect","HomePage","mapDispatchToProps","onInc","onDec","onDelete","shoppingCart","items","cartItems","total","orderTotal","length","to","item","idx","count","CartPage","itemsCount","orderCount","role","path","component","exact","ErrorBoundry","state","this","setState","children","Component","BookstoreService","Promise","resolve","setTimeout","updateBookList","action","undefined","updateOrder","quantity","find","itemId","findIndex","newArr","slice","updateCartItems","updateCartItem","reduce","a","b","updateShoppingCart","delItem","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","ReactDOM","render","value","basename","process","document","getElementById"],"mappings":"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","file":"static/js/main.5472aea2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cross.3360c57c.svg\";","import { createContext } from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n};","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../BookstoreServiceContext/BookstoreServiceContext';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (\r\n              <Wrapped {...props} bookstoreService={bookstoreService} />\r\n            )\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withBookstoreService;","const booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST'\r\n  };\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error\r\n  };\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nconst bookAddToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADD_TO_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst bookDeleteFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_DELETE_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst bookCountDecreaseInCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_COUNT_DECREASE_IN_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddToCart,\r\n  bookDeleteFromCart,\r\n  bookCountDecreaseInCart\r\n};","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight(\r\n    (wrapped, f) => f(wrapped), comp);\r\n}\r\n\r\nexport default compose;","import React from 'react';\r\nimport './Spinner.css';\r\n\r\nconst Spinner = () => (\r\n  <div className=\"lds-css ng-scope spinner\">\r\n    <div className=\"lds-rolling\">\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport error from './cross.svg';\r\nimport './ErrorIndicator.css';\r\n\r\nconst ErrorIndicator = () => (\r\n  <div className=\"error-indicator\">\r\n    <img alt=\"error\" src={error} />\r\n    <span>Something went wrong</span>\r\n    <span>we are trying to solve this problem</span>\r\n  </div>\r\n);\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport './BookListItem.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst BookListItem = ({ book, onAddToCart }) => {\r\n  const { title, author, price, cover } = book;\r\n\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={cover} alt={title} />\r\n      </div>\r\n      <div className=\"book-description\">\r\n        <span href=\"#\" className=\"book-title\">{title}</span>\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button\r\n          className=\"btn btn-info add-to-cart\"\r\n          onClick={onAddToCart}\r\n        >\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nBookListItem.propTypes = {\r\n  book: PropTypes.object,\r\n  onAddToCart: PropTypes.func\r\n};\r\n\r\nexport default BookListItem;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BookListItem from '../BookListItem/BookListItem';\r\n\r\nimport './BookList.css';\r\n\r\nconst BookList = ({ books, onAddToCart }) => (\r\n  <ul className=\"book-list\">\r\n    {\r\n      books.map(book => {\r\n        return (\r\n          <li key={book.id}>\r\n            <BookListItem\r\n              book={book}\r\n              onAddToCart={() => onAddToCart(book.id)} />\r\n          </li>\r\n        )\r\n      })\r\n    }\r\n  </ul>\r\n);\r\n\r\nBookList.propTypes = {\r\n  books: PropTypes.arrayOf(PropTypes.object),\r\n  onAddToCart: PropTypes.func.isRequired\r\n};\r\n\r\nexport default BookList;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { fetchBooks, bookAddToCart } from '../actions';\r\nimport compose from '../utils/compose';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport withBookstoreService from '../components/Hoc/WithBookstoreService';\r\nimport Spinner from '../components/Spinner/Spinner';\r\nimport ErrorIndicator from '../components/ErrorIndicator/ErrorIndicator';\r\nimport BookList from '../components/BookList/BookList';\r\n\r\nconst BookListContainer = (props) => {\r\n  const { error, books, loading, fetchBooks, onAddToCart } = props;\r\n\r\n  useEffect(() => {\r\n    fetchBooks();\r\n  }, [fetchBooks]);\r\n\r\n  if (loading) {\r\n    return <Spinner />\r\n  };\r\n\r\n  if (error) {\r\n    return <ErrorIndicator />\r\n  };\r\n\r\n  return <BookList\r\n    books={books}\r\n    onAddToCart={onAddToCart} />\r\n};\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n  return bindActionCreators({\r\n    fetchBooks: fetchBooks(bookstoreService),\r\n    onAddToCart: bookAddToCart\r\n  }, dispatch);\r\n};\r\n\r\nBookListContainer.propTypes = {\r\n  error: PropTypes.bool,\r\n  books: PropTypes.arrayOf(PropTypes.object),\r\n  loading: PropTypes.bool,\r\n  fetchBooks: PropTypes.func.isRequired,\r\n  onAddToCart: PropTypes.func.isRequired\r\n};\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);","import React from 'react';\r\nimport BookListContainer from '../../containers/BookListContainer';\r\n\r\nconst HomePage = () => (\r\n  <div>\r\n    <BookListContainer />\r\n  </div>\r\n);\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { bookDeleteFromCart, bookAddToCart, bookCountDecreaseInCart } from '../../actions';\r\nimport PropTypes from 'prop-types';\r\nimport './ShoppingCart.css';\r\n\r\nconst ShoppingCart = ({ items, total, onInc, onDec, onDelete }) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td>\r\n          <button\r\n            className=\"btn btn-outline-warning btn-sm\"\r\n            onClick={() => onDec(id)}\r\n          >\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n          <button\r\n            className=\"btn btn-outline-success btn-sm\"\r\n            onClick={() => onInc(id)}\r\n          >\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n\r\n          <button\r\n            className=\"btn btn-outline-danger btn-sm\"\r\n            onClick={() => onDelete(id)}\r\n          >\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    )\r\n  };\r\n\r\n  if (items.length === 0) {\r\n    return (\r\n      <div className=\"empty-shopping-cart\">\r\n        <Link to=\"/\">\r\n          <i className=\"fa fa-shopping-basket\" />\r\n          <span>Your shopping cart is empty</span>\r\n        </Link>\r\n      </div>\r\n    )\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart\">\r\n      <h2>Your order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Book Title</th>\r\n            <th>Count</th>\r\n            <th>Total</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {items.map(renderRow)}\r\n        </tbody>\r\n      </table>\r\n\r\n      <h2 className=\"total\">Total: ${total}</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onInc: (id) => bookAddToCart(id),\r\n  onDec: (id) => bookCountDecreaseInCart(id),\r\n  onDelete: (id) => bookDeleteFromCart(id)\r\n};\r\n\r\nShoppingCart.propTypes = {\r\n  items: PropTypes.arrayOf(PropTypes.object),\r\n  total: PropTypes.number,\r\n  onInc: PropTypes.func.isRequired,\r\n  onDec: PropTypes.func.isRequired,\r\n  onDelete: PropTypes.func.isRequired\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCart);","import React from 'react';\r\nimport ShoppingCart from '../ShoppingCart/ShoppingCart';\r\n\r\nconst CartPage = () => (\r\n  <div>\r\n    <ShoppingCart />\r\n  </div>\r\n);\r\n\r\nexport default CartPage;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './Header.css';\r\n\r\nconst Header = ({ itemsCount, total }) => (\r\n  <header className=\"header row\">\r\n    <Link to=\"/\" className=\"logo text-dark\" >Redux Store</Link>\r\n    <Link to=\"/cart\" className=\"shopping-cart\">\r\n      <i className=\"cart-icon fa fa-shopping-cart\" />\r\n      {itemsCount} items (${total})\r\n        </Link>\r\n  </header>\r\n);\r\n\r\nconst mapStateToProps = ({ shoppingCart: { orderTotal, orderCount } }) => {\r\n  return {\r\n    itemsCount: orderCount,\r\n    total: orderTotal\r\n  }\r\n};\r\n\r\nHeader.propTypes = {\r\n  itemsCount: PropTypes.number,\r\n  total: PropTypes.number\r\n};\r\n\r\nexport default connect(mapStateToProps)(Header);","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport withBookstoreService from '../Hoc/WithBookstoreService';\r\nimport HomePage from '../Pages/HomePage';\r\nimport CartPage from '../Pages/CartPage';\r\nimport Header from '../Header/Header';\r\n\r\nconst App = () => (\r\n  <main role=\"main\" className=\"container\">\r\n    <Header />\r\n    <Switch>\r\n      <Route path=\"/\"\r\n        component={HomePage}\r\n        exact />\r\n      <Route path=\"/cart\"\r\n        component={CartPage} />\r\n    </Switch>\r\n  </main>\r\n);\r\n\r\nexport default withBookstoreService()(App);","import React, { Component } from 'react';\r\nimport ErrorInicator from '../ErrorIndicator/ErrorIndicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    error: false\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.setState({ error: true })\r\n  }\r\n\r\n  render() {\r\n    if (this.state.error) {\r\n      return <ErrorInicator />\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n};","export default class BookstoreService {\r\n\r\n  data = [\r\n    { author: 'Mark Frost', cover: 'https://upload.wikimedia.org/wikipedia/en/8/8a/The_Secret_History_of_Twin_Peaks_cover.jpg', id: 1, price: 20, title: 'The Secret History of Twin Peaks' },\r\n    { author: 'J.K.Rowling', cover: 'https://upload.wikimedia.org/wikipedia/en/7/70/Harry_Potter_and_the_Order_of_the_Phoenix.jpg', id: 2, price: 15, title: 'Harry Potter and the Order of the Phoenix' },\r\n    { author: 'J.R.R.Tolkien', cover: 'https://upload.wikimedia.org/wikipedia/en/e/e9/First_Single_Volume_Edition_of_The_Lord_of_the_Rings.gif', id: 3, price: 27, title: 'Lord of the Rings' },\r\n    { author: 'George R.R.Martin', cover: 'https://upload.wikimedia.org/wikipedia/en/d/dc/A_Song_of_Ice_and_Fire_book_collection_box_set_cover.jpg', id: 4, price: 40, title: 'A Song of Ice and Fire' },\r\n    { author: 'Andrzej Sapkowski', cover: 'https://upload.wikimedia.org/wikipedia/en/1/14/Andrzej_Sapkowski_-_The_Last_Wish.jpg', id: 5, price: 80, title: 'The Witcher' },\r\n    { author: 'F.Scott Fitzgerald', cover: 'https://upload.wikimedia.org/wikipedia/en/f/f7/TheGreatGatsby_1925jacket.jpeg', id: 6, price: 50, title: 'The Great Gatsby' },\r\n    { author: 'Stephen King', cover: 'https://upload.wikimedia.org/wikipedia/en/4/4c/Shiningnovel.jpg', id: 7, price: 35, title: 'The Shining' },\r\n    { author: 'Suzanne Collins', cover: 'https://upload.wikimedia.org/wikipedia/en/d/dc/The_Hunger_Games.jpg', id: 8, price: 25, title: 'The Hunger Games' },\r\n    { author: 'Philip K.Dick', cover: 'https://upload.wikimedia.org/wikipedia/en/e/ee/DoAndroidsDream.png', id: 9, price: 90, title: 'Do Androids Dream of Electric Sheep?' }\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        resolve(this.data);\r\n      }, 1000);\r\n    });\r\n  };\r\n\r\n};","const updateBookList = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null,\r\n    };\r\n  };\r\n\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  };\r\n};\r\n\r\nexport default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      ...cartItems.slice(idx + 1)\r\n    ];\r\n  };\r\n\r\n  if (idx === - 1) {\r\n    return [\r\n      ...cartItems,\r\n      item\r\n    ]\r\n  };\r\n\r\n  return [\r\n    ...cartItems.slice(0, idx),\r\n    item,\r\n    ...cartItems.slice(idx + 1)\r\n  ];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const {\r\n    id = book.id,\r\n    count = 0,\r\n    title = book.title,\r\n    total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const { bookList: { books }, shoppingCart: { cartItems } } = state;\r\n\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemId = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemId];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  const newArr = updateCartItems(cartItems, newItem, itemId);\r\n\r\n  return {\r\n    cartItems: newArr,\r\n    orderTotal: newArr.reduce((a, b) => a + b.total, 0),\r\n    orderCount: newArr.reduce((a, b) => a + b.count, 0)\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0,\r\n      orderCount: 0\r\n    };\r\n  };\r\n\r\n  switch (action.type) {\r\n    case 'BOOK_ADD_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case 'BOOK_COUNT_DECREASE_IN_CART':\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case 'BOOK_DELETE_FROM_CART':\r\n      const delItem = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\r\n      return updateOrder(state, action.payload, -delItem.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  };\r\n};\r\n\r\nexport default updateShoppingCart;","import updateBookList from './bookList';\r\nimport updateShoppingCart from './shoppingCart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport reducer from './reducers';\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n  if (typeof action === 'string') {\r\n    return next({\r\n      type: action\r\n    });\r\n  };\r\n\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware, stringMiddleware));\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/App/App';\nimport ErrorBoundry from './components/ErrorBoundry/ErrorBoundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/BookstoreServiceContext/BookstoreServiceContext';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root'));"],"sourceRoot":""}