{"version":3,"sources":["components/ErrorIndicator/cross.svg","components/BookstoreServiceContext/BookstoreServiceContext.js","components/Hoc/WithBookstoreService.js","actions/index.js","utils/compose.js","components/Spinner/Spinner.js","components/ErrorIndicator/ErrorIndicator.js","components/BookListItem/BookListItem.js","components/BookList/BookList.js","containers/BookListContainer.js","components/Pages/HomePage.js","components/ShoppingCart/ShoppingCart.js","components/Pages/CartPage.js","components/Header/Header.js","components/App/App.js","components/ErrorBoundry/ErrorBoundry.js","services/bookstore-service.js","reducers/bookList.js","reducers/shoppingCart.js","reducers/index.js","store.js","index.js"],"names":["module","exports","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","fetchBooks","dispatch","type","getBooks","then","data","payload","catch","err","bookAddToCart","bookId","compose","funcs","comp","reduceRight","wrapped","f","Spinner","className","ErrorIndicator","alt","src","error","BookListItem","book","onAddToCart","title","author","price","cover","href","onClick","BookList","books","map","key","id","connect","bookList","loading","bindActionCreators","useEffect","HomePage","mapDispatchToProps","onInc","onDec","onDelete","shoppingCart","items","cartItems","total","orderTotal","length","to","item","idx","count","CartPage","itemsCount","orderCount","role","path","component","exact","ErrorBoundry","state","this","setState","children","Component","BookstoreService","_fireBaseUrl","axios","get","res","updateBookList","action","undefined","updateOrder","quantity","find","itemId","findIndex","newArr","slice","updateCartItems","updateCartItem","reduce","a","b","updateShoppingCart","delItem","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.4da157ce.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cross.3360c57c.svg\";","import { createContext } from 'react';\r\n\r\nconst { \r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider, \r\n    BookstoreServiceConsumer\r\n};","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../BookstoreServiceContext/BookstoreServiceContext';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                        return (\r\n                            <Wrapped {...props} bookstoreService={bookstoreService}/>\r\n                        )\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withBookstoreService;","const booksRequested = () => {\r\n    return {\r\n        type: 'FETCH_BOOKS_REQUEST'\r\n    }\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks\r\n    }\r\n};\r\n\r\nconst booksError = (error) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    }\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n        .then((data) => dispatch(booksLoaded(data)))\r\n        .catch((err) => dispatch(booksError(err)));\r\n}\r\n\r\nconst bookAddToCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_ADD_TO_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nconst bookDeleteFromCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_DELETE_FROM_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nconst bookCountDecreaseInCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_COUNT_DECREASE_IN_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nexport {\r\n    fetchBooks,\r\n    bookAddToCart,\r\n    bookDeleteFromCart,\r\n    bookCountDecreaseInCart\r\n};","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n        (wrapped, f) => f(wrapped), comp);\r\n}\r\n\r\nexport default compose;","import React from 'react';\r\nimport './Spinner.css';\r\n\r\nconst Spinner = () => (\r\n    <div className=\"lds-css ng-scope spinner\">\r\n        <div className=\"lds-rolling\">\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport error from './cross.svg';\r\nimport './ErrorIndicator.css';\r\n\r\nconst ErrorIndicator = () => (\r\n    <div className=\"error-indicator\">\r\n        <img alt=\"error\" src={error}/>\r\n        <span>Something went wrong</span>\r\n        <span>we are trying to solve this problem</span>\r\n    </div>\r\n);\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport './BookListItem.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst BookListItem = ({ book, onAddToCart }) => {\r\n    const { title, author, price, cover } = book;\r\n\r\n    return (\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={cover} alt={title} />\r\n            </div>\r\n            <div className=\"book-description\">\r\n                <span href=\"#\" className=\"book-title\">{title}</span>\r\n                <div className=\"book-author\">{author}</div>\r\n                <div className=\"book-price\">${price}</div>\r\n                <button\r\n                    className=\"btn btn-info add-to-cart\"\r\n                    onClick={onAddToCart}>\r\n                    Add to cart\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nBookListItem.propTypes = {\r\n    book: PropTypes.object,\r\n    onAddToCart: PropTypes.func\r\n};\r\n\r\nexport default BookListItem;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BookListItem from '../BookListItem/BookListItem';\r\n\r\nimport './BookList.css';\r\n\r\nconst BookList = ({ books, onAddToCart }) => (\r\n    <ul className=\"book-list\">\r\n        {\r\n            books.map(book => {\r\n                return (\r\n                    <li key={book.id}>\r\n                        <BookListItem\r\n                            book={book}\r\n                            onAddToCart={() => onAddToCart(book.id)} />\r\n                    </li>\r\n                )\r\n            })\r\n        }\r\n    </ul>\r\n);\r\n\r\nBookList.propTypes = {\r\n    books: PropTypes.arrayOf(PropTypes.object),\r\n    onAddToCart: PropTypes.func.isRequired\r\n};\r\n\r\nexport default BookList;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { fetchBooks, bookAddToCart } from '../actions';\r\nimport compose from '../utils/compose';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport withBookstoreService from '../components/Hoc/WithBookstoreService';\r\nimport Spinner from '../components/Spinner/Spinner';\r\nimport ErrorIndicator from '../components/ErrorIndicator/ErrorIndicator';\r\nimport BookList from '../components/BookList/BookList';\r\n\r\nconst BookListContainer = (props) => {\r\n    const { error, books, loading, fetchBooks, onAddToCart } = props;\r\n\r\n    useEffect(() => {\r\n        fetchBooks();\r\n    }, [fetchBooks]);\r\n\r\n    if (loading) {\r\n        return <Spinner />\r\n    }\r\n\r\n    if (error) {\r\n        return <ErrorIndicator />\r\n    }\r\n\r\n    return <BookList\r\n        books={books}\r\n        onAddToCart={onAddToCart} />\r\n};\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n    return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n    return bindActionCreators({\r\n        fetchBooks: fetchBooks(bookstoreService),\r\n        onAddToCart: bookAddToCart\r\n    }, dispatch);\r\n};\r\n\r\nBookListContainer.propTypes = {\r\n    error: PropTypes.bool,\r\n    books: PropTypes.arrayOf(PropTypes.object),\r\n    loading: PropTypes.bool,\r\n    fetchBooks: PropTypes.func.isRequired,\r\n    onAddToCart: PropTypes.func.isRequired\r\n}\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);","import React from 'react';\r\nimport BookListContainer from '../../containers/BookListContainer';\r\n\r\nconst HomePage = () => (\r\n    <div>\r\n        <BookListContainer />\r\n    </div>\r\n)\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { bookDeleteFromCart, bookAddToCart, bookCountDecreaseInCart } from '../../actions';\r\nimport PropTypes from 'prop-types';\r\nimport './ShoppingCart.css';\r\n\r\nconst ShoppingCart = ({ items, total, onInc, onDec, onDelete }) => {\r\n    const renderRow = (item, idx) => {\r\n        const { id, title, count, total } = item;\r\n\r\n        return (\r\n            <tr key={id}>\r\n                <td>{idx + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>${total}</td>\r\n                <td>\r\n                    <button\r\n                        className=\"btn btn-outline-danger btn-sm float-right\"\r\n                        onClick={() => onDelete(id)}\r\n                    >\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button\r\n                        className=\"btn btn-outline-success btn-sm float-right\"\r\n                        onClick={() => onInc(id)}\r\n                    >\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button\r\n                        className=\"btn btn-outline-warning btn-sm float-right\"\r\n                        onClick={() => onDec(id)}\r\n                    >\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    };\r\n\r\n    if (items.length === 0) {\r\n        return (\r\n            <div className=\"empty-shopping-cart\">\r\n                <Link to=\"/\">\r\n                    <i className=\"fa fa-shopping-basket\" />\r\n                    <span>Your shopping cart is empty</span>\r\n                </Link>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    return (\r\n        <div className=\"shopping-cart\">\r\n            <h2>Your order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Book Title</th>\r\n                        <th>Count</th>\r\n                        <th>Total</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {items.map(renderRow)}\r\n                </tbody>\r\n            </table>\r\n\r\n            <h2 className=\"total\">Total: ${total}</h2>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onInc: (id) => bookAddToCart(id),\r\n    onDec: (id) => bookCountDecreaseInCart(id),\r\n    onDelete: (id) => bookDeleteFromCart(id)\r\n};\r\n\r\nShoppingCart.propTypes = {\r\n    items: PropTypes.arrayOf(PropTypes.object),\r\n    total: PropTypes.number,\r\n    onInc: PropTypes.func.isRequired,\r\n    onDec: PropTypes.func.isRequired,\r\n    onDelete: PropTypes.func.isRequired\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCart);","import React from 'react';\r\nimport ShoppingCart from '../ShoppingCart/ShoppingCart';\r\n\r\nconst CartPage = () => (\r\n    <div>\r\n        <ShoppingCart />\r\n    </div>\r\n);\r\n\r\nexport default CartPage;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './Header.css';\r\n\r\nconst Header = ({ itemsCount, total }) => (\r\n    <header className=\"header row\">\r\n        <Link to=\"/\" className=\"logo text-dark\" >Redux Store</Link>\r\n        <Link to=\"/cart\" className=\"shopping-cart\">\r\n            <i className=\"cart-icon fa fa-shopping-cart\" />\r\n            {itemsCount} items (${total})\r\n        </Link>\r\n    </header>\r\n);\r\n\r\nconst mapStateToProps = ({ shoppingCart: { orderTotal, orderCount } }) => {\r\n    return {\r\n        itemsCount: orderCount,\r\n        total: orderTotal\r\n    }\r\n};\r\n\r\nHeader.propTypes = {\r\n    itemsCount: PropTypes.number,\r\n    total: PropTypes.number\r\n};\r\n\r\nexport default connect(mapStateToProps)(Header);","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport withBookstoreService from '../Hoc/WithBookstoreService';\r\nimport HomePage from '../Pages/HomePage';\r\nimport CartPage from '../Pages/CartPage';\r\nimport Header from '../Header/Header';\r\n\r\nconst App = () => (\r\n    <main role=\"main\" className=\"container\">\r\n        <Header/>\r\n        <Switch>\r\n            <Route path=\"/\" \r\n                   component={HomePage}\r\n                   exact/>\r\n            <Route path=\"/cart\" \r\n                   component={CartPage}/>\r\n        </Switch>\r\n    </main>\r\n)\r\n\r\nexport default withBookstoreService()(App);","import React, { Component } from 'react';\r\nimport ErrorInicator from '../ErrorIndicator/ErrorIndicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n    state = {\r\n        error: false\r\n    }\r\n\r\n    componentDidCatch() {\r\n        this.setState({ error: true })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.error) {\r\n            return <ErrorInicator />\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}","import axios from 'axios';\r\n\r\nexport default class BookstoreService {\r\n    _fireBaseUrl = 'https://redux-store.firebaseio.com'\r\n\r\n    async getBooks() {\r\n        const res = await axios.get(`${this._fireBaseUrl}/books/-Ltf9K0QNcQUinW0oAsh.json`);\r\n\r\n        return res.data\r\n    };\r\n};","const updateBookList = (state, action) => {\r\n    if (state === undefined) {\r\n        return {\r\n            books: [],\r\n            loading: true,\r\n            error: null,\r\n        };\r\n    };\r\n\r\n    switch (action.type) {\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return {\r\n                books: [],\r\n                loading: true,\r\n                error: null\r\n            };\r\n\r\n        case 'FETCH_BOOKS_SUCCESS': \r\n            return {\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            };\r\n\r\n        case 'FETCH_BOOKS_FAILURE': \r\n            return {\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            };\r\n\r\n        default:\r\n            return state.bookList;\r\n    };\r\n};\r\n\r\nexport default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n    if (item.count === 0) {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1)\r\n        ];\r\n    };\r\n\r\n    if (idx === - 1) {\r\n        return [\r\n            ...cartItems,\r\n            item\r\n        ]\r\n    };\r\n\r\n    return [\r\n        ...cartItems.slice(0, idx),\r\n        item,\r\n        ...cartItems.slice(idx + 1)\r\n    ];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n    const { \r\n        id = book.id, \r\n        count = 0, \r\n        title = book.title, \r\n        total = 0 } = item;\r\n\r\n    return {\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: total + quantity*book.price\r\n    };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const {bookList: { books }, shoppingCart: { cartItems }} = state;\r\n\r\n    const book = books.find(({id})=> id === bookId);\r\n    const itemId = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemId];\r\n\r\n    const newItem = updateCartItem(book, item, quantity);\r\n    const newArr = updateCartItems(cartItems, newItem, itemId);\r\n\r\n    return {\r\n        cartItems: newArr,\r\n        orderTotal: newArr.reduce((a, b) => a + b.total, 0),\r\n        orderCount: newArr.reduce((a, b) => a + b.count, 0)\r\n    };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n    if (state === undefined) {\r\n        return {\r\n            cartItems: [],\r\n            orderTotal: 0,\r\n            orderCount: 0 \r\n        };\r\n    };\r\n\r\n    switch (action.type) {\r\n        case 'BOOK_ADD_TO_CART':\r\n            return updateOrder(state, action.payload, 1);\r\n\r\n        case 'BOOK_COUNT_DECREASE_IN_CART':\r\n            return updateOrder(state, action.payload, -1);\r\n\r\n        case 'BOOK_DELETE_FROM_CART':\r\n            const delItem = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\r\n            return updateOrder(state, action.payload, -delItem.count);\r\n\r\n        default:\r\n            return state.shoppingCart;\r\n    };\r\n};\r\n\r\nexport default updateShoppingCart;","import updateBookList from './bookList';\r\nimport updateShoppingCart from './shoppingCart';\r\n\r\nconst reducer = (state, action) => {\r\n    return {\r\n        bookList: updateBookList(state, action),\r\n        shoppingCart: updateShoppingCart(state, action)\r\n    }\r\n};\r\n\r\nexport default reducer;","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport reducer from './reducers';\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n    if (typeof action === 'string') {\r\n        return next({\r\n            type: action\r\n        });\r\n    };\r\n\r\n    return next(action);\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware, stringMiddleware));\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/App/App';\nimport ErrorBoundry from './components/ErrorBoundry/ErrorBoundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/BookstoreServiceContext/BookstoreServiceContext';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundry>\n            <BookstoreServiceProvider value={bookstoreService}>\n                <Router>\n                    <App />\n                </Router>\n            </BookstoreServiceProvider>\n        </ErrorBoundry>\n    </Provider>,\n    document.getElementById('root'));"],"sourceRoot":""}